<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>sql语句 | chen&#39;s blog</title>
    <meta name="description" content="个人博客">
    
    
    <link rel="preload" href="/assets/css/0.styles.8c37933a.css" as="style"><link rel="preload" href="/assets/js/app.56d36088.js" as="script"><link rel="preload" href="/assets/js/2.b0aa7967.js" as="script"><link rel="preload" href="/assets/js/6.8aa7f68e.js" as="script"><link rel="prefetch" href="/assets/js/10.e5a7eb88.js"><link rel="prefetch" href="/assets/js/11.ff76e042.js"><link rel="prefetch" href="/assets/js/12.1ec8026e.js"><link rel="prefetch" href="/assets/js/3.f557593c.js"><link rel="prefetch" href="/assets/js/4.91bf8aaf.js"><link rel="prefetch" href="/assets/js/5.0a3d416a.js"><link rel="prefetch" href="/assets/js/7.3e0110a0.js"><link rel="prefetch" href="/assets/js/8.06e9888d.js"><link rel="prefetch" href="/assets/js/9.8b6b49f6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8c37933a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">chen's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/前端/markdown语法.html" class="nav-link">前端</a></div><div class="nav-item"><a href="/后端/node.html" class="nav-link">后端</a></div><div class="nav-item"><a href="https://github.com/chendreamer" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  baidu
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/前端/markdown语法.html" class="nav-link">前端</a></div><div class="nav-item"><a href="/后端/node.html" class="nav-link">后端</a></div><div class="nav-item"><a href="https://github.com/chendreamer" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  baidu
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/后端/node.html" class="sidebar-link">node</a></li><li><a href="/后端/sql语句.html" class="active sidebar-link">sql语句</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="sql语句"><a href="#sql语句" aria-hidden="true" class="header-anchor">#</a> sql语句</h1> <p><img src="/assets/img/yunsuanfu.04823248.png" alt="yunsuanfu"><br>
查询：<code>SELECT name,country FROM Websites;</code><br>
去掉 &quot;country&quot; 列重复值：<code>SELECT DISTINCT country FROM Websites;</code><br>
选取国家为 &quot;CN&quot; 的所有网站：<code>SELECT * FROM Websites WHERE country='CN';</code><br>
逻辑运算的优先级：( ) &gt; not &gt; and  &gt;  or</p> <div class="language- extra-class"><pre class="language-text"><code>select * from emp where not sal &gt; 1500;
Select * from emp where comm is null;
Select * from emp where sal between 1500 and 3000;
</code></pre></div><p>查询 EMP 表 SAL 列中等于 5000，3000，1500 的值:</p> <div class="language- extra-class"><pre class="language-text"><code>Select * from emp where sal in (5000,3000,1500);
Select * from emp where ename like 'M%';
</code></pre></div><p>% 表示多个字值，_ 下划线表示一个字符；<br>
 M% : 为能配符，正则表达式，表示的意思为模糊查询信息为 M 开头的。<br>
 %M% : 双百分号表示查询的信息在内容中间。<br>
 %M_% : 表示查询的字母在内容的倒数第二位<br> <code>SELECT * FROM Websites ORDER BY country,alexa;</code>
默认 ASC（升序）。DESC（降序）。</p> <div class="language- extra-class"><pre class="language-text"><code>INSERT INTO Websites (name, url, alexa, country) 
VALUES ('百度','https://www.baidu.com/','4','CN');
UPDATE Websites SET alexa='5000', country='USA' WHERE name='菜鸟教程';
</code></pre></div><p>执行没有 WHERE 子句的 UPDATE 要慎重（容易吧所有数据都替换了）。<br> <code>DELETE FROM Websites WHERE name='百度' AND country='CN';</code><br>
您可以在不删除表的情况下，删除表中所有的行。这意味着表结构、属性、索引将保持不变：<br> <code>DELETE FROM table_name;或DELETE * FROM table_name;</code><br>
查询选取头5条记录：</p> <div class="language- extra-class"><pre class="language-text"><code>MySQL： SELECT * FROM Persons LIMIT 5;
Oracle：SELECT * FROM Persons WHERE ROWNUM &lt;=5;
SELECT * FROM Websites WHERE name IN ('Google','菜鸟教程');
SELECT * FROM access_log
WHERE date BETWEEN '2016-05-10' AND '2016-05-14';
</code></pre></div><p>把三个列（url、alexa 和 country）结合在一起，并创建一个名为 &quot;site_info&quot; 的别名：</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT name, CONCAT(url, ', ', alexa, ', ', country) AS site_info FROM Websites;
SELECT w.name, w.url, a.count, a.date  FROM Websites AS w, access_log AS a WHERE a.site_id=w.id and w.name=&quot;菜鸟教程&quot;;
</code></pre></div><p>INNER JOIN：如果表中有至少一个匹配，则返回行<br>
LEFT JOIN：即使右表中没有匹配，也从左表返回所有的行<br>
RIGHT JOIN：即使左表中没有匹配，也从右表返回所有的行<br>
FULL JOIN：只要其中一个表中存在匹配，则返回行</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT Websites.id, Websites.name, access_log.count, access_log.date
FROM Websites  INNER JOIN access_log
ON Websites.id=access_log.site_id;
</code></pre></div><p>LEFT JOIN 关键字从左表（table1）返回所有的行，即使右表（table2）中没有匹配。如果右表中没有匹配，则结果为 NULL。</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT Websites.name, access_log.count, access_log.date
FROM Websites LEFT JOIN access_log ON Websites.id=access_log.site_id
ORDER BY access_log.count DESC;
</code></pre></div><p>RIGHT JOIN 关键字从右表（table2）返回所有的行，即使左表（table1）中没有匹配。如果左表中没有匹配，则结果为 NULL。</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT Websites.name, access_log.count, access_log.date 
FROM access_log RIGHT JOIN Websites ON access_log.site_id=Websites.id 
ORDER BY access_log.count DESC;
</code></pre></div><p>默认地，UNION 操作符选取不同的值。如果允许重复的值，请使用 UNION ALL。<br>
UNION 结果集中的列名总是等于 UNION 中第一个 SELECT 语句中的列名。</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT country, name FROM Websites  WHERE country='CN'
UNION ALL
SELECT country, app_name FROM apps
WHERE country='CN'
ORDER BY country;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>CREATE DATABASE my_db;
CREATE TABLE Persons
(PersonID int,LastName varchar(255),FirstName varchar(255));
CREATE TABLE Persons
( P_Id int NOT NULL, LastName varchar(255) NOT NULL, FirstName varchar(255),
Address varchar(255), City varchar(255)   )
</code></pre></div><p>每个表可以有多个 UNIQUE 约束，但是每个表只能有一个 PRIMARY KEY 约束。</p> <div class="language- extra-class"><pre class="language-text"><code>DROP TABLE IF EXISTS `apps`;
CREATE TABLE `apps` (   `id` int(11) NOT NULL AUTO_INCREMENT,
  `app_name` char(20) NOT NULL DEFAULT '' COMMENT '站点名称',
  `url` varchar(255) NOT NULL DEFAULT '',
  `country` char(10) NOT NULL DEFAULT '' COMMENT '国家',
  PRIMARY KEY (`id`)  )
MySQL：CREATE TABLE Orders
(O_Id int NOT NULL, OrderNo int NOT NULL, P_Id int,
PRIMARY KEY (O_Id), FOREIGN KEY (P_Id) REFERENCES Persons(P_Id) )
Oracle：CREATE TABLE Orders
(O_Id int NOT NULL PRIMARY KEY, OrderNo int NOT NULL,
P_Id int FOREIGN KEY REFERENCES Persons(P_Id))
MySQL：CREATE TABLE Persons
( P_Id int NOT NULL, LastName varchar(255) NOT NULL, FirstName varchar(255),
Address varchar(255), City varchar(255), CHECK (P_Id&gt;0) )
Oracle：CREATE TABLE Persons
( P_Id int NOT NULL CHECK (P_Id&gt;0), LastName varchar(255) NOT NULL,
FirstName varchar(255), Address varchar(255), City varchar(255) )
</code></pre></div><p>DROP TABLE 语句用于删除表。  <code>DROP TABLE table_name</code><br>
DROP DATABASE 语句用于删除数据库。 <code>DROP DATABASE database_name</code><br>
改变表中列的数据类型：<code>ALTER TABLE table_name MODIFY column_name datatype;</code></p> <div class="language- extra-class"><pre class="language-text"><code>CREATE TABLE Persons
( ID int NOT NULL AUTO_INCREMENT, LastName varchar(255) NOT NULL,
FirstName varchar(255), Address varchar(255), City varchar(255), PRIMARY KEY (ID))
CREATE OR REPLACE VIEW view_name AS
SELECT column_name(s)   FROM table_name   WHERE condition ;
SELECT * FROM Orders WHERE OrderDate='2008-11-11' ;
SELECT LastName,FirstName,Address FROM Persons  WHERE Address IS NULL;
SELECT LastName,FirstName,Address FROM Persons WHERE Address IS NOT NULL;
SELECT AVG(count) AS CountAverage FROM access_log;
SELECT COUNT(count) AS nums FROM access_log  WHERE site_id=3;
SELECT MAX(alexa) AS max_alexa FROM Websites;
SELECT MIN(alexa) AS min_alexa FROM Websites;
SELECT SUM(count) AS nums FROM access_log;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>SELECT site_id, SUM(access_log.count) AS nums
FROM access_log GROUP BY site_id;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>SELECT Websites.name, SUM(access_log.count) AS nums FROM Websites
INNER JOIN access_log
ON Websites.id=access_log.site_id
WHERE Websites.alexa &lt; 200
GROUP BY Websites.name
HAVING SUM(access_log.count) &gt; 200;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>SELECT name, LENGTH(url) as LengthOfURL   FROM Websites;
SELECT name, url, Now() AS date  FROM Websites;
SELECT name, url, DATE_FORMAT(Now(),'%Y-%m-%d') AS date   FROM Websites;
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">6/18/2019, 2:04:42 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/后端/node.html" class="prev">
          node
        </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.56d36088.js" defer></script><script src="/assets/js/2.b0aa7967.js" defer></script><script src="/assets/js/6.8aa7f68e.js" defer></script>
  </body>
</html>
